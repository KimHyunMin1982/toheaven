시스템구상 후 확인해보니 특허출원된것을 검색할수 있었다.
2018년도 5월 21일
https://patentscope.wipo.int/search/ko/detail.jsf;jsessionid=52E751EAE4CF09D634B86D4659BF1C9C.wapp2nB?docId=KR278908869&_cid=P21-K6NLCW-30735-69

프로젝트명 : 실시간 환자 모니터링 시스템

<목적>
환자의 몸상태를 확인하여 몸에 이상상태가 발생 시
경고음을 발생하여 의료진이 실시간으로 확인하고 대처할 수
있도록 한다.

<기능 구현 목록>
1. IP Camera를 설치하여 병실을 확인한다.
2. 환자의 심장박동을 확인한다.
3. 환자의 이상상태(ex.몸에 가해지는 압력)를 확인한다.
4. 환자의 심장박동 이상상태 발생시 타겟에 경고음을 발생한다.
5. 환자의 심장박동 이상상태 발생시 스마트폰에 이벤트를 문구를 발생한다.
6. 스마트폰 앱에서 1번 버튼을 누를경우 측정중인 데이터를 .csv파일로 저장한다.
7. 스마트폰 앱에서 2번 버튼을 누를경우 저장된 심박데이터를 시간에 따라 그래프로 시각화한다.
8. 스마트폰 앱에서 이메일버튼을 추가하여 보호자에게 문자를 전송한다.

<세부 기능 구현>
1. IP카메라를 연동해 화면을 띄워 실시간 상태를 파악한다. (RTSP를 통한 연결)
   # RTSP(real-time streaming protocol) : 실시간으로 음성이나 동영상을 송수신하기 위한 통신 규약(프로토콜)을 말한다.
2. 환자의 심장박동을 1초당 측정하여 60초의 범위내의 값을 다 더한 후에 전체 심박수를 스마트폰 앱에 표시하여 준다.
   처음 측정 시는 1부터 60까지의 심박수를 리스트에 담아두고,
   60초 이상의 심박수 측정 시는 1초가 지날때마다 리스트의 0번인덱스를
   삭제하고 59의 크기로 만든다.
   59인덱스에 새로 측정된 심박수를 추가하여 새로운 60의 크기로 만든다.
   새로 측정된 심박수를 스마트폰 앱에 표시하여 준다.
   (처음 1~60까지의 초기 측정값을 리스트에 넣어주지 않으면 60초 이상에서 인덱스 삭제, 추가시 범위 지정 에러가 발생한다.)
3. 타겟의 포텐셜미터를 조절하여 1~10단계의 압력수치를 스마트폰 앱에 표시하여 준다.
4. 타겟의 포텐셜미터를 조절하여 1~10단계의 압력수치를 주어 압력 수치가 높을수록 
   심장박동이 빨라지게끔 조절하여 타겟의 부저로 경고음을 발생한다.
   (콜백함수를 등록하여 포텐셜미터 조절에 따른 심장박동 범위를 넓혀준다.)
5. 압력조절에 의해 발생된 이상상태의 심장박동을 확인하여 스마트폰 이벤트 위젯을 통해 경고문구를 표시한다.
   (콜백함수를 등록하여 포텐셜미터 조절에 따른 심장박동 범위를 넓혀준다.)
6. 타겟의 project/python 폴더에 측정된 심박수 데이터를 .csv파일로 저장한다.
7. 타겟의 project/python 폴더에 생성된 .csv파일을 시각화한다.
8. 스마트폰 앱의 슈퍼차트 위젯의 Export to CSV로 저장된 이메일 주소에 파일을 전송한다.
   스마트폰 앱의 이메일 위젯을 추가하여 위젯에 저장된 이메일 주소로 특정 버튼을 누를 경우 문구를 전송한다.
   
<세부 기능 구현 결과>
1. 블링크 서버에 접속해서 연동하면 카메라 이미지가 출력된다. 커스텀에서 내부 와이파이를 사용하면 연결되지 않는다.
2. 메인 함수에서 쓰레드를 돌려서 심장박동을 1초에 1~2를 생성하여 60초범위의 심장박동 패턴을 생성하였지만
   생성된 심장박동수의 1초와 스마트폰 앱에서 타겟의 데이터를 읽어들이는 1초의 차이로 인해 실시간 데이터 송수신이 불가능하다.
   무선네트워크의 전송속도가 늦은 편이라 심박수 패턴을 사용하여 표시하는것은 멈춰있는 상태가 많아서 임의의 범위를 지정하여
   콜백함수를 통해서 데이터값을 송수신하였다.
   쓰레드 안에서는 블링크 라이트 함수가 실행되지 않았다. 포텐셜미터의 콜백함수 내에서는 블링크 라이트 함수가 실행되었다.
3. 타겟의 포텐셜미터값을 디지털값 1~10으로 받아서 압력 수치로 사용하였다.
4. 압력에 따른 범위를 임의로 지정하여 경고음을 발생하였는데 타겟에서 경고음이 발생하는 중에는 스마트폰 앱에 다른 데이터 송신이
   안되는 문제가 발생하였다.
5. 미구현
6. 실행한 파일의 경로에 심박수 데이터가 .csv 파일로 저장 되지만 계속 저장되고 멈추지는 않았다.
7. 저장된 파일을 시각화 해보지 못했다.
8. 미구현

<고찰>
- MAX30100 Pulse Oximeter - 심장박동 측정 센서를 이용하여 임의의 심박패턴 데이터를 대체하여 정밀도를 올린다.
- 콜백함수에서는 실행되는 쓰레드에서 블링크 리드, 라이트 함수가 실행되지 않는 이유를 확인해봐야 한다.
- 타겟에서 센서가 구동되는 중에 스마트폰 앱에서 타깃의 데이터를 수신받지 못하는 현상의 이유를 확인해봐야 한다.
  (무선 네트워크의 전송속도가 느려서인가?, 로직의 실행시간동안 잡혀있는 문제인가?-센서출력부를 쓰레드로 실행하여도 수신받지못한다.)
- 테스트 목적으로 작성된 프로그램을 리팩토링한다. (필요없는 변수와 비효율적인 로직)
- 의료측정관련 전문지식의 부재로 인해 시스템 구성이 지연되었다. 보충이 필요하다.
- 기본적인 바이탈사인 지금 다루고 있는 심전도 모니터(ECG monitor) 외에도
  인공호흡기(ventilator), 인큐베이터(incubator), 혈액가스(blood gas), 
  의료용 지속적 기도양압용 압박기 및 모니터(CPAP: continuous positive airway pressure),
  주입펌프(infusion pump) 등을 연동하여 각환자의 현재상태를 지속적으로 기록 및 데이터화 할수 있다. 
- 중환자실(ICU)이나 신생아실은 병원에서 각종 병균에 민감한 지역으로 특별히 멸균상태가 잘 유지되어야 한다.
  의사나 간호사의 중환자실 출입 빈도수가 많아 질수록 감염이나 오염의 가능성이 높아져서 간혹 치명적인 의료사고가 발생하기도 하며,
  그와는 반대 의사나 간호사, 또는 간병인등 전염성이 높은 환자를 최소한의 접촉으로 전염의 확률을 낮추는데에 목적이 있다.
  그리고 더 나아가 실시간 환자 모니터링 시스템으로 부족한 의료진들의 인력난을 덜 수 있을 것으로 기대된다. 

